[gd_scene load_steps=25 format=3 uid="uid://xw0rgdcs8rf0"]

[ext_resource type="Script" uid="uid://b5bskh456xhw3" path="res://world.gd" id="1_eu7l1"]
[ext_resource type="PackedScene" uid="uid://cf70atxem4i7a" path="res://scenes/ChunkSystem/chunk.tscn" id="2_2dftf"]
[ext_resource type="AudioStream" uid="uid://c5f13mdaxbl3j" path="res://asset/audio/forest_ambient.ogg" id="2_bah7m"]
[ext_resource type="Script" uid="uid://dhclc17k6vdwl" path="res://scenes/ChunkSystem/universal_chunk_manager.gd" id="2_wygdx"]
[ext_resource type="Texture2D" uid="uid://br188a5ewr45s" path="res://scenes/effects/daynightcycle-gradient-texture.tres" id="4_f5c0m"]
[ext_resource type="Script" uid="uid://cd75o1rcp0yft" path="res://terrain_logic.gd" id="4_fv4w7"]
[ext_resource type="Script" uid="uid://byo46vcpfe6m2" path="res://scenes/ui/DynamicMargins.gd" id="4_wygdx"]
[ext_resource type="Curve" uid="uid://0c27bhlvfwdu" path="res://scenes/effects/light_curve.tres" id="5_b2ar6"]
[ext_resource type="Shader" uid="uid://tqspoeqoycuv" path="res://resources/shaders/DayNightOverlay.gdshader" id="6_b2ar6"]
[ext_resource type="Script" uid="uid://bpqljsrpxr6p3" path="res://resources/terrain/tile_generator.gd" id="6_f5c0m"]
[ext_resource type="Script" uid="uid://c3b3eioqj67cr" path="res://scenes/ChunkSystem/chunk_debug_manager.gd" id="6_kva58"]
[ext_resource type="Script" uid="uid://bd046eokvcnu2" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="9_fv4w7"]
[ext_resource type="Script" uid="uid://dlbd030oai4mk" path="res://scenes/effects/sky_overlay.gd" id="10_fvag4"]
[ext_resource type="Shader" uid="uid://c88yah626nm5s" path="res://resources/shaders/cloud.gdshader" id="15_gn8l5"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_gn8l5"]
noise_type = 4
frequency = 0.016
fractal_octaves = 1
fractal_gain = 0.235
fractal_weighted_strength = 1.0
cellular_distance_function = 3
domain_warp_enabled = true
domain_warp_type = 2
domain_warp_fractal_type = 2
domain_warp_fractal_lacunarity = 1.97
domain_warp_fractal_gain = 0.52

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_6w02q"]
width = 1280
height = 720
invert = true
seamless = true
seamless_blend_skirt = 1.0
bump_strength = 30.6
normalize = false
noise = SubResource("FastNoiseLite_gn8l5")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6w02q"]
shader = ExtResource("15_gn8l5")
shader_parameter/noise_texture = SubResource("NoiseTexture2D_6w02q")
shader_parameter/fog_color = Color(0, 0, 0, 1)
shader_parameter/density = 0.81
shader_parameter/speed = Vector2(0.005, 0.005)
shader_parameter/pixel_size = 512.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ee7l0"]
shader = ExtResource("6_b2ar6")
shader_parameter/global_transform = Projection(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)
shader_parameter/n_lights = 0
shader_parameter/dark_color = Color(0.25, 0.0625, 0.25, 1)
shader_parameter/default_light_color = Color(0, 0, 0, 1)
shader_parameter/light_level = 0.0
shader_parameter/offset_modifier = 1.0
shader_parameter/n_light_bands = 7
shader_parameter/will_smooth_shade = false
shader_parameter/band_decay_rate = 0.5
shader_parameter/light_strength_modifier = 1.0

[sub_resource type="AudioStreamPlaylist" id="AudioStreamPlaylist_fv4w7"]
shuffle = true
stream_count = 1
stream_0 = ExtResource("2_bah7m")

[sub_resource type="FastNoiseLite" id="FastNoiseLite_fvag4"]
frequency = 0.0034
fractal_type = 2
fractal_lacunarity = 2.09
fractal_gain = 0.585
fractal_weighted_strength = 0.76
domain_warp_enabled = true
domain_warp_type = 1
domain_warp_amplitude = 30.355

[sub_resource type="FastNoiseLite" id="FastNoiseLite_kva58"]
frequency = 0.0771

[sub_resource type="FastNoiseLite" id="FastNoiseLite_f5c0m"]
frequency = 0.022
fractal_lacunarity = 15.74
fractal_gain = 1.08
fractal_weighted_strength = 0.23

[sub_resource type="FastNoiseLite" id="FastNoiseLite_b2ar6"]
noise_type = 3
frequency = 0.0352
fractal_gain = 1.125
fractal_weighted_strength = 1.0
domain_warp_type = 2

[sub_resource type="FastNoiseLite" id="FastNoiseLite_ee7l0"]
noise_type = 2
frequency = 0.0414
fractal_type = 3
fractal_gain = 0.145
fractal_weighted_strength = 1.0
fractal_ping_pong_strength = 3.2
cellular_distance_function = 2
cellular_jitter = -0.005
domain_warp_enabled = true
domain_warp_type = 1
metadata/_preview_in_3d_space_ = true

[node name="World" type="Node2D"]
process_mode = 1
y_sort_enabled = true
script = ExtResource("1_eu7l1")

[node name="Camera2D" type="Camera2D" parent="."]

[node name="PhantomCameraHost" type="Node" parent="Camera2D"]
process_priority = 300
process_physics_priority = 300
script = ExtResource("9_fv4w7")
metadata/_custom_type_script = "uid://bd046eokvcnu2"

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
layer = 1

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_mirroring = Vector2(5120, 2880)

[node name="ColorRect" type="ColorRect" parent="ParallaxBackground/ParallaxLayer"]
material = SubResource("ShaderMaterial_6w02q")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 5120.0
offset_bottom = 2880.0
grow_horizontal = 2
grow_vertical = 2

[node name="SkyOverlay" type="CanvasLayer" parent="."]
script = ExtResource("10_fvag4")
gradient_texture = ExtResource("4_f5c0m")
light_threshold = ExtResource("5_b2ar6")

[node name="Sky" type="ColorRect" parent="SkyOverlay"]
material = SubResource("ShaderMaterial_ee7l0")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2

[node name="CanvasModulate" type="CanvasModulate" parent="."]

[node name="Environtment" type="Node2D" parent="."]

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="Environtment"]
stream = SubResource("AudioStreamPlaylist_fv4w7")
autoplay = true
mix_target = 1
bus = &"music"

[node name="ChunkManager" type="Node2D" parent="." node_paths=PackedStringArray("label_chunk")]
y_sort_enabled = true
script = ExtResource("2_wygdx")
chunk_scene = ExtResource("2_2dftf")
tile_size = 24
TILES_PER_FRAME = 512
load_radius = 1
pool_initial_size = 100
CHUNKS_PER_PLAYER_PER_FRAME = 1
label_chunk = NodePath("CanvasLayer/MarginContainer/Control/Panel/VBoxContainer/ChunkN")
player_path = NodePath("")
terrain_logic_path = NodePath("TerrainLogic")
tile_generator_path = NodePath("TileGenerator")

[node name="DebugManager" type="Node2D" parent="ChunkManager"]
script = ExtResource("6_kva58")

[node name="TerrainLogic" type="Node" parent="ChunkManager"]
script = ExtResource("4_fv4w7")
biome_noise = SubResource("FastNoiseLite_fvag4")

[node name="TileGenerator" type="Node" parent="ChunkManager"]
script = ExtResource("6_f5c0m")
ground_variation = SubResource("FastNoiseLite_kva58")
tree_variation = SubResource("FastNoiseLite_f5c0m")
vegetation_variation = SubResource("FastNoiseLite_b2ar6")
noise_variation = SubResource("FastNoiseLite_ee7l0")

[node name="CanvasLayer" type="CanvasLayer" parent="ChunkManager"]

[node name="MarginContainer" type="MarginContainer" parent="ChunkManager/CanvasLayer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
mouse_default_cursor_shape = 8
script = ExtResource("4_wygdx")

[node name="Control" type="Control" parent="ChunkManager/CanvasLayer/MarginContainer"]
layout_mode = 2
mouse_filter = 2

[node name="Panel" type="Panel" parent="ChunkManager/CanvasLayer/MarginContainer/Control"]
layout_mode = 2
anchor_right = 0.190972
anchor_bottom = 0.195988
metadata/_edit_use_anchors_ = true

[node name="VBoxContainer" type="VBoxContainer" parent="ChunkManager/CanvasLayer/MarginContainer/Control/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="ChunkN" type="Label" parent="ChunkManager/CanvasLayer/MarginContainer/Control/Panel/VBoxContainer"]
layout_mode = 2

[node name="EntityContainer" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Audio" type="Node2D" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="Audio"]
_spawnable_scenes = PackedStringArray("uid://ckjp333pwljyu")
spawn_path = NodePath("..")
